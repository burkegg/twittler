<!DOCTYPE html>
<html lang = "en">
  <head>
    <meta charset = "UTF-8">
    <title>Twittler</title>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <main>
      <header>
        <h1>Twittler:  Why not engineer a cat?</h1>
      </header>
      <div>


    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');



        (function(){
          var index = streams.home.length - 1;
          prev_index = index;
          setInterval(function(){
            current_index = streams.home.length - 1;
            curr_ind_ref = streams.home.length - 1;
            var new_group_of_tweets = [];

            while(current_index > prev_index){
              var tweet = streams.home[current_index];
              var $tweet = $('<div></div>');

              $tweet.text(current_index + '   ' + '@' + tweet.user + ': ' + tweet.message + '  :   ' + tweet.created_at);
              //$tweet.appendTo($body);
              new_group_of_tweets.push($tweet);
              current_index -= 1;
            }
            for (let idx = new_group_of_tweets.length - 1; idx >= 0; idx--){
              new_group_of_tweets[idx].prependTo($body);
            }
            prev_index = curr_ind_ref;
          }, 5000);
        })();  
        


        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message + '  ' + tweet.created_at);
          $tweet.appendTo($body);
          index -= 1;
        }
      });

    </script>
  </body>
</html>
